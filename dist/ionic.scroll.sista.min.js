!function(e,t){"use strict";e.module("jett.ionic.scroll.sista",["ionic"]).directive("scrollSista",["$document","$timeout","$ionicScrollDelegate","$ionicGesture",function(a,n,o,r){var i=400,c=2*i,s=i+"ms",l=t.Platform.isAndroid()?!1:!0;return{restrict:"A",link:function(i,u,f){function d(e,a,o){o&&!e.style[t.CSS.TRANSITION_DURATION]&&(e.style[t.CSS.TRANSITION_DURATION]=o,n(function(){e.style[t.CSS.TRANSITION_DURATION]=""},c,!1)),e.style[t.CSS.TRANSFORM]="translate3d(0, "+-a+"px, 0)"}function S(){T=0,N=0,v=0}function b(){if(A=D.querySelector('[nav-bar="cached"] .bar-header'),g=D.querySelector('[nav-bar="active"] .bar-header'))switch(M=g.offsetHeight,R=M,x=D.querySelector(".tabs"),x&&(O=x.offsetHeight,x.parentNode.classList.contains("tabs-top")?(L=!0,R+=O):x.parentNode.classList.contains("tabs-bottom")&&(V=!0)),I=D.querySelector(".bar-subheader"),I&&($=I.offsetHeight,R+=$),k=2*R,C=H=q=k,O=O||0,$=$||0,f.scrollSista){case"header":q=M,H=L?M:0;break;case"header-tabs":j=L?O:0,q=L?M+O:M;break;case"tabs-subheader":C=0,j=L?R-M:$,E=L?$:0;break;case"tabs":C=0,q=L?O:0;break;case"subheader":C=0,H=0;break;default:j=L?R-M:$,E=L?$:0}}function h(a,n){var o=1-a/M;d(g,a,n),e.forEach(g.children,function(e){e.style.opacity=o,l&&(e.style[t.CSS.TRANSFORM]="scale("+o+","+o+")")}),d(A,a,n)}function m(e,a){var n,o,r=u[0].style,i=e>j?e-j:0;t.requestAnimationFrame(function(){I&&(o=e>G?e-G:0,d(I,Math.min(q,o),a)),x&&(n=Math.min(H,e>E?e-E:0),V&&(n=-n,r.bottom=Math.max(0,O-e)+"px"),d(x,n,a)),h(Math.min(C,i),a),r.top=Math.max(0,R-e)+"px"})}var y=!1;"true"==f.scrollSistaSnap&&(y=!0);var p,T,N,v,A,g,M,R,I,$,x,O,k,C,H,q,D=a[0].body,w=f.delegateHandle?o.$getByHandle(f.delegateHandle):o,F=w.getScrollView(),U=!1,_=!1,B=!1,L=!1,V=!1,j=0,E=0,G=0;S(),i.$on("scroll.refreshComplete",function(){S()}),i.$parent.$on("$ionicView.leave",function(){var e=u[0].style.top;e&&e!==R+"px"&&(m(0),S())}),u.bind("scroll",function(e){A&&g||b();var t=0,a=e.detail.scrollTop;T=a>=0?Math.min(k,Math.max(0,T+a-v)):0,F.getScrollMax().top-a<=R&&(T=0,t=s),v=a,null!==p&&clearTimeout(p),p=setTimeout(function(){U=!1,_=!1,y&&k/2>T&&(B||(U=!0,w.scrollBy(0,-T,!0),T=0,N=0,m(0,s)))},100),N===T||U||(N=T,m(T,t))}),y&&(r.on("touch",function(e){U=!1,B=!0},u),r.on("release",function(e){B=!1},u))}}}])}(angular,ionic);